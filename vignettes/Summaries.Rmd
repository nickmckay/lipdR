---
title: "Exploring LiPD data using lipdR summary functions"
author: "David Edge"
date: "`r Sys.Date()`"
output: rmarkdown::html_vignette
vignette: >
  %\VignetteIndexEntry{Summarize LiPD}
  %\VignetteEngine{knitr::rmarkdown}
  %\VignetteEncoding{UTF-8}
---

```{r setup, include = FALSE}
devtools::load_all("C:\\Users\\dce72\\Documents\\LiPDsandbox\\lipdR-Summarize")
knitr::opts_chunk$set(
  collapse = TRUE,
  comment = "#>"
)
```

## Data
### Load LiPD files from lipdverse.org
```{r echo=T, results='hide'}

D <- readLipd("http://lipdverse.org/testData/testData.zip")

```
## Single LiPD
### See a detailed summary of a single LiPD
```{r}

L1 <- D[[1]]
lipdSummary(L1)

```
## Multi LiPD
### Get a summary of all LiPDs in the directory, details of first 20
### Return time values in "AD" units if available
```{r}

lipdDirSummary(D, printLen=20, timeUnits="AD", retTable = FALSE)

```
### save the summary table

```{r}

dirSummary <- lipdDirSummary(D, printLen=20, timeUnits="AD", retTable = TRUE)

```
### sort table to find age ensembles

```{r}
dirSummary[order(dirSummary$NumEns, decreasing=TRUE),]
```


## LiPD TS Objects
### Format data as a tibble LiPD TS
```{r}

TS1 <- extractTs(D)
tibTS <- ts2tibble(TS1)

```

### View dimensions of tibble object
```{r}
dim(tibTS)
```

### Print summary of LiPD TS, detail first 10 only
```{r}

lipdTSSummary(tibTS, printLen = 10, retTable = FALSE)

```

### Save summary table and view a specific subset
```{r}

TSsummary <- lipdTSSummary(tibTS, printLen = 10, retTable = TRUE)

tibTS1 <- TSsummary[TSsummary$dsName == "165_1002C.Herbert.2000",]
tibTS1

```
### Subset the TS object and view a summary

```{r}

tibTS2 <- tibTS[grep("tree", tibTS$archiveType),]
lipdTSSummary(tibTS2, printLen = 50)

```




